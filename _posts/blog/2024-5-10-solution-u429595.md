---
layout: post
title: U429595 签到题 题解
categories: Blog
description: none
keywords: U429595, 签到题, 题解, 原创
usemathjax: true
---

众所周知，每场比赛都要有一个签到题。

## 解法

### 引入 

所有可以快速合并的信息均可用线段树维护。

根据某数据结构大师 lxl ~~（hentai）~~ 的理论，值域小，且查询数字种类，可以使用 `std::bitset`。

~~然后这题不就做完了吗。~~

---

不知道大家还记不记得第一周留过的一道作业：[集合运算 3](https://www.luogu.com.cn/problem/B3695)。

仔细看那道题的操作 $1$ 和操作 $4$，是不是似曾相识？如果不会那道题，可以去 [团队文件](https://www.luogu.com.cn/team/76722#file) 找我~~之前被迫营业~~写的题解。

### 正解

建一颗线段树，线段树的每个节点都维护一个 `bitset`，查询操作和集合运算那题同理。

区间推平操作：清空相应 `bitset`，再将 `bitset` 中位置 $x$ 赋值为 $1$。

区间加操作：注意到如果是像集合运算那题单纯的左移，会导致有一部分数丢失 ~~（废话，那题要求删除大于值域上界的数）~~，解决方法是将上面本来丢失的部分右移到低位（其实就是循环左移）。

现在这题是真的做完了。

时间复杂度 $\mathcal{O}(\lceil \dfrac{2024}{w} \rceil (n + q) \log n)$，其中 $w$ 一般为 $32$ 或 $64$。

## 代码

什么？还想看代码？不贺难受是吧？
